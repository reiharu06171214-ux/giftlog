{% extends "base.html" %}
{% block content %}
  <div class="card">
    <h2>ギフト編集</h2>

    <form method="post" class="grid cols-2" style="gap:12px;">
      <!-- タイトル & 受領日 -->
      <label>タイトル*<br>
        <input name="title" value="{{ gift.title }}" required autofocus>
      </label>
      <label>受領日<br>
        <input name="received_date" type="date" value="{{ gift.received_date|datejp }}">
      </label>

      <!-- 金額 & 贈り主 -->
      <label>金額（円・任意）<br>
        <input name="amount_yen" type="number" min="0" step="1" value="{{ gift.amount_yen or '' }}">
        <span class="small">※ 半角数字。未入力でもOKだよ</span>
      </label>

      <label>贈り主<br>
        <select name="giver_id">
          <option value="">（未選択）</option>
          {% for g in givers %}
            <option value="{{ g.id }}" {% if gift.giver_id == g.id %}selected{% endif %}>{{ g.name }}</option>
          {% endfor %}
        </select>
      </label>

      <!-- カテゴリ & 返礼期日 -->
      <label>カテゴリ<br>
        <select name="category_id">
          <option value="">（未選択）</option>
          {% for c in categories %}
            <option value="{{ c.id }}" {% if gift.category_id == c.id %}selected{% endif %}>{{ c.name }}</option>
          {% endfor %}
        </select>
      </label>

      <label>返礼ToDo期日<br>
        <input name="return_due_date" type="date" value="{{ gift.return_due_date|datejp }}">
        <span class="small">※ カレンダー出力に使われます</span>
      </label>

      <!-- チェック類 -->
      <label><span class="small">ありがとう連絡</span><br>
        <input type="checkbox" name="thank_you_sent" {% if gift.thank_you_sent %}checked{% endif %}> 済
      </label>
      <label><span class="small">お返しOK？</span><br>
        <input type="checkbox" name="return_done" {% if gift.return_done %}checked{% endif %}> 済
      </label>

      <!-- メモ -->
      <label style="grid-column:1/-1;">メモ<br>
        <textarea name="memo" rows="4" placeholder="メモを入力">{{ gift.memo }}</textarea>
      </label>

      <!-- ボタン -->
      <div style="grid-column:1/-1; display:flex; gap:8px; flex-wrap:wrap;">
        <button class="btn btn-search" type="submit" style="flex:1 1 200px;">更新</button>
        <a class="btn" href="{{ url_for('gifts') }}" style="flex:1 1 200px; text-align:center;">← 一覧へ戻る</a>
      </div>
    </form>
  </div>
{% endblock %}
